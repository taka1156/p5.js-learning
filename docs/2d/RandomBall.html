<!DOCTYPE html><html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width" />
  <title>ボールを動かす</title>
</head>
<body>
<style type="text/css">

* {
	margin : 0 ;
	padding : 0 ; 
	font-size : 100% ;
}

body {
	font-size : 75% ;
	text-align : center ;
	line-height : 1.4 ;
}


</style>

<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.9.0/p5.js"></script>

<script>
let Balls = [];

let  X,Y;
X=Y= null;

class Ball{
    constructor(){
        this.vecLocation = createVector(random(width),random(height));
        this.vecVelocity = createVector(20, 30);
        this.diameter = random(25);
        this.speed = 30;
        this.R = random(255);
        this.G = random(255);
        this.B = random(255);
        
        if(X !== null || Y !== null){
            this.vecLocation = createVector(X, Y);
            this.diameter = 30;

        }
    }

    move(){
        this.vecLocation.x += random(-this.speed, this.speed);

        this.vecLocation.y += random(-this.speed, this.speed);

        if( this.vecLocation.x < 0 || this.vecLocation.x > windowWidth-10){
            this.vecVelocity.x = this.vecVelocity.x * -1;
        }
        if(this.vecLocation.y < 0 || this.vecLocation.y > windowHeight-10){
            this.vecVelocity.y = this.vecVelocity.y * -1;
        }
    }

    display(){
        this.vecLocation.add(this.vecVelocity);
        fill(this.R, this.G, this.B)
        ellipse(this.vecLocation.x, this.vecLocation.y, this.diameter, this.diameter);
    }
}

function setup(){
    createCanvas(windowWidth-10, windowHeight-10);
    for(let i =0; i<50; i++){
       Balls.push(new Ball());
    }
}

function draw(){
    background(0);
    for(let i=0; i<Balls.length; i++){
        Balls[i].move();
        Balls[i].display();
    }

    if(mouseIsPressed){
        X = mouseX;
        Y = mouseY;
        Balls.push(new Ball());
        Balls.push(new Ball());
        Balls.push(new Ball());
    }
}
</script>
</body>
</html>